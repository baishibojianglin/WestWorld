(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{"064d":function(e,t,n){"use strict";(function(e){n("b863"),n("921b");s(n("66fd"));var t=s(n("7f3e"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"21f8":function(e,t,n){"use strict";(function(e,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("2f62"),a=u(n("4c0e")),o=u(n("c9c7"));function u(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),s.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){return n.e("node-modules/@dcloudio/uni-ui/lib/uni-badge/uni-badge").then(n.bind(null,"8e6d"))},g={components:{uniBadge:c},data:function(){return{userData:{},list:[{name:"我的积分",open:!1,pages:[{name:"已兑换积分",url:"",count:""},{name:"待兑换积分",url:"",count:""}],url:"",count:""},{name:"我的比赛",open:!0,pages:[{name:"已预约比赛",url:"/pages/session-order/session-order?order_status=1",order_status:1,count:""},{name:"待付款比赛",url:"/pages/session-order/session-order?order_status=0",order_status:0,count:""},{name:"历史比赛",url:"/pages/session-order/session-order?order_status=3",order_status:3,count:""}]},{name:"用户红利",url:"/pages/user/user-shares/user-shares",count:""}],navigateFlag:!1}},computed:(0,r.mapState)(["hasLogin","userInfo"]),onShow:function(){this.hasLogin||e.reLaunch({url:"/pages/login/login"}),this.getUserInfo(),this.getSessionOrderCount()},methods:i({},(0,r.mapMutations)(["logout"]),{bindLogin:function(){this.hasLogin?this.logout():e.navigateTo({url:"/pages/login/login"})},getUserInfo:function(){var t=this;this.hasLogin&&e.request({url:this.$serverUrl+"user/"+this.userInfo.user_id,header:{sign:a.default.sign(),version:getApp().globalData.version,model:getApp().globalData.systemInfo.model,apptype:getApp().globalData.systemInfo.platform,did:getApp().globalData.did,"access-user-token":this.userInfo.token},method:"GET",success:function(e){var n=JSON.parse(o.default.decode(e.data.data));n.avatar=n.avatar?t.$imgServerUrl+n.avatar.replace(/\\/g,"/"):"../../static/img/user.png",n.signature=n.signature?n.signature:"（没有签名）";var s=new Date(n.create_time);n.create_time=s.getFullYear()+"."+s.getMonth()+"."+s.getDate(),t.userData=n,t.list[0].count=String(n.get_integrals),t.list[0].pages.forEach(function(e,t){switch(t){case 0:e.count=String(n.used_integrals);break;case 1:e.count=String(n.rest_integrals);default:break}}),t.list[2].count=String(n.user_shares),t.list[2].url="/pages/user/user-shares/user-shares?user_id="+t.userInfo.user_id+"&user_shares="+n.user_shares}})},goUserInfo:function(){e.navigateTo({url:"/pages/user/user-info/user-info"})},triggerCollapse:function(e){if(this.list[e].pages)for(var t=0;t<this.list.length;++t)this.list[t].open=e===t&&!this.list[e].open;else this.goDetailPage(this.list[e].url)},goDetailPage:function(t){var n=this;if(!this.navigateFlag){this.navigateFlag=!0;var s=t.url?t.url:t,r=~s.indexOf("pages")?s:"/pages/"+s+"/"+s;return e.navigateTo({url:r}),setTimeout(function(){n.navigateFlag=!1},200),!1}},getSessionOrderCount:function(){var t=this;this.list[1].pages.forEach(function(n,r){e.request({url:t.$serverUrl+"session_order",data:{user_id:t.userInfo.user_id,order_status:n.order_status},header:{sign:a.default.sign(),version:getApp().globalData.version,model:getApp().globalData.systemInfo.model,apptype:getApp().globalData.systemInfo.platform,did:getApp().globalData.did,"access-user-token":t.userInfo.token},method:"GET",success:function(e){200==e.statusCode&&(n.count=String(e.data.data.total))},fail:function(e){console.log(s(e," at pages\\user\\user.vue:254"))}})})}})};t.default=g}).call(this,n("6e42")["default"],n("0de9")["default"])},"3c42":function(e,t,n){},"4c61":function(e,t,n){"use strict";var s=n("3c42"),r=n.n(s);r.a},"799c":function(e,t,n){"use strict";n.r(t);var s=n("21f8"),r=n.n(s);for(var a in s)"default"!==a&&function(e){n.d(t,e,function(){return s[e]})}(a);t["default"]=r.a},"7f3e":function(e,t,n){"use strict";n.r(t);var s=n("bf59"),r=n("799c");for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);n("4c61");var o=n("2877"),u=Object(o["a"])(r["default"],s["a"],s["b"],!1,null,null,null);t["default"]=u.exports},bf59:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.item2.url&&e.goDetailPage(e.item2)})},r=[];n.d(t,"a",function(){return s}),n.d(t,"b",function(){return r})}},[["064d","common/runtime","common/vendor"]]]);