(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0ed3":function(t,e,n){},"2f48":function(t,e,n){"use strict";n.r(e);var a=n("59b4"),i=n("d8d0");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("bc7b");var s=n("2877"),u=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=u.exports},"53b9":function(t,e,n){"use strict";(function(t){n("b863"),n("921b");a(n("66fd"));var e=a(n("2f48"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"59b4":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},bc7b:function(t,e,n){"use strict";var a=n("0ed3"),i=n.n(a);i.a},c00a:function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("2f62"),o=s(n("4c0e"));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){return n.e("node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more").then(n.bind(null,"72ad"))},l=function(){return n.e("node-modules/@dcloudio/uni-ui/lib/uni-swiper-dot/uni-swiper-dot").then(n.bind(null,"a321"))},d=function(){return n.e("node-modules/@dcloudio/uni-ui/lib/uni-search-bar/uni-search-bar").then(n.bind(null,"4c89"))},r=(n("f3d5").dateUtils,{components:{uniSearchBar:d,uniSwiperDot:l,uniLoadMore:u},data:function(){return{styleHeader:"",searchVal:"",indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,adList:[{}],current:0,mode:"nav",title:"场 馆",listFlag:0,listData:[],last_id:"",reload:!1,status:"more",contentText:{contentdown:"上拉加载更多",contentrefresh:"加载中",contentnomore:"没有更多"}}},globalData:{longitude:"",latitude:""},onLoad:function(){this.getTopBanner(),this.getVenueListByLocation()},onReady:function(){var t=this;this.$refs.loading.open(),setTimeout(function(){t.$refs.loading.close()},1e3)},onPageScroll:function(t){t.scrollTop>0?this.styleHeader="position: fixed; z-index: 9; top: 87upx; background-color: rgba(255, 255, 255, 0.9);":this.styleHeader=""},onPullDownRefresh:function(){this.reload=!0,this.last_id="",this.getTopBanner(),this.getVenueList(),setTimeout(function(){t.stopPullDownRefresh()},1e3)},onReachBottom:function(){this.status="more",this.getVenueList()},onNavigationBarSearchInputClicked:function(e){console.log(a("事件执行了"," at pages\\index\\index.vue:166")),t.navigateTo({url:"/pages/index/search/search"})},onNavigationBarButtonTap:function(){t.showModal({title:"提示",content:"用户点击了功能按钮，这里仅做展示。",success:function(t){t.confirm&&console.log(a("用户点击了确定"," at pages\\index\\index.vue:180"))}})},computed:(0,i.mapState)(["userInfo"]),methods:{getVenueListByLocation:function(){var e=this;this.listData=[],this.last_id="",t.showModal({title:"授权定位",content:"获取你的地理位置，查看场馆",cancelText:"全部",confirmText:"附近",success:function(n){t.getLocation({type:"wgs84",success:function(t){getApp().globalData.longitude=t.longitude.toFixed(6),getApp().globalData.latitude=t.latitude.toFixed(6),1==n.confirm&&(e.title="附 近 场 馆",e.listFlag=1,e.getVenueList()),1==n.cancel&&(e.title="场 馆",e.listFlag=0,e.getVenueList())}})}})},search:function(e){t.showToast({title:"搜索："+e.value,icon:"none"}),this.getVenueListByLocation()},input:function(t){this.searchVal=t.value},cancel:function(e){t.showToast({title:"点击取消，输入值为："+e.value,icon:"none"})},swiperChange:function(t){this.current=t.detail.current},getTopBanner:function(){var e=this;t.request({url:this.$serverUrl+"ad",data:{position_id:1},header:{sign:o.default.sign(),version:getApp().globalData.version,model:getApp().globalData.systemInfo.model,apptype:getApp().globalData.systemInfo.platform,did:getApp().globalData.did},success:function(t){if(200==t.statusCode){var n=t.data.data.data;n.forEach(function(t,n){t.ad_pic=t.ad_pic?e.$imgServerUrl+t.ad_pic.replace(/\\/g,"/"):"/static/img/home.png"}),e.adList=n}},fail:function(t,e){console.log(a("fail"+JSON.stringify(t)," at pages\\index\\index.vue:277"))}})},toAdDetail:function(e){"http://"==e.substr(0,7).toLowerCase()||"https://"==e.substr(0,8).toLowerCase()?window.location.href=e:t.navigateTo({url:e})},getVenueList:function(){var e=this,n=this,i={longitude:getApp().globalData.longitude,latitude:getApp().globalData.latitude,listFlag:this.listFlag,size:10};null!=this.searchVal&&(i.venue_name=this.searchVal),this.last_id&&(this.status="loading",i.minId=this.last_id,i.size=5),t.request({url:this.$serverUrl+"venue",data:i,header:{sign:o.default.sign(),version:getApp().globalData.version,model:getApp().globalData.systemInfo.model,apptype:getApp().globalData.systemInfo.platform,did:getApp().globalData.did},success:function(t){if(200==t.statusCode){var a=t.data.data.list;a.forEach(function(t,e){t.thumb=t.thumb?n.$imgServerUrl+t.thumb.replace(/\\/g,"/"):"../../static/img/home.png",1<t.distance?t.distance=t.distance+"㎞":t.distance=1e3*t.distance+"m"}),e.listData=e.reload?a:e.listData.concat(a),e.last_id=a[a.length-1].venue_id,e.reload=!1}else if(404==t.statusCode&&e.last_id==t.data.data.maxId)return void(e.status="")},fail:function(t,e){console.log(a("fail"+JSON.stringify(t)," at pages\\index\\index.vue:365"))}})},toVenueDetail:function(e){var n={venue_id:e.venue_id,venue_name:e.venue_name};t.navigateTo({url:"../venue/venue-detail?detailData="+encodeURIComponent(JSON.stringify(n))})},setTime:function(t){var e=[];return t.forEach(function(t){e.push({venue_id:t.venue_id,venue_name:t.venue_name,thumb:t.thumb,venue_phone:t.venue_phone,address:t.address})}),e}}});e.default=r}).call(this,n("6e42")["default"],n("0de9")["default"])},d8d0:function(t,e,n){"use strict";n.r(e);var a=n("c00a"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a}},[["53b9","common/runtime","common/vendor"]]]);